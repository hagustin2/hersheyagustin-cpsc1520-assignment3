(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();let i=[];async function r(){const e=await fetch("https://6628195a54afcabd0734e043.mockapi.io/api/v1/albums");r.albumData=await e.json(),u(),l("")}function u(){document.getElementById("favorites-button").classList.remove("active"),document.getElementById("search-button").classList.add("active"),document.getElementById("favorites-tab").classList.add("d-none"),document.getElementById("search-tab").classList.remove("d-none")}function m(){document.getElementById("search-button").classList.remove("active"),document.getElementById("favorites-button").classList.add("active"),document.getElementById("search-tab").classList.add("d-none"),document.getElementById("favorites-tab").classList.remove("d-none"),d()}function l(e){const t=document.getElementById("search-results");t.innerHTML="",r.albumData.filter(o=>{const s=o.artistName.toLowerCase().includes(e.toLowerCase()),n=o.albumName.toLowerCase().includes(e.toLowerCase());return s||n}).forEach(o=>{const s=document.createElement("li");s.classList.add("list-group-item","d-flex","justify-content-between","align-items-start"),s.innerHTML=`
            <div class="ms-2 me-auto">
                <div class="fw-bold">${o.albumName} <span class="badge bg-primary rounded-pill">${o.averageRating}</span></div>
                <span>${o.artistName}</span>
            </div>
            <button data-uid="${o.id}" type="button" class="btn btn-success">Add to Favorites</button>
        `,t.appendChild(s)})}document.getElementById("search-form").addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("query").value;l(t)});document.addEventListener("click",function(e){if(e.target&&e.target.classList.contains("btn-success")){const t=e.target.dataset.uid,a=r.albumData.find(o=>o.id===t);a&&(f(a),d())}});async function f(e){if(!i.some(t=>t.id===e.id)){i.push(e);const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return await(await fetch("https://6628195a54afcabd0734e043.mockapi.io/api/v1/favorites",t)).json()}}function d(){const e=document.getElementById("my-albums");e.innerHTML="",i.forEach(t=>{const a=document.createElement("li");a.classList.add("list-group-item","d-flex","justify-content-between","align-items-start"),a.innerHTML=`
            <div class="ms-2 me-auto">
                <div class="fw-bold">${t.albumName} <span class="badge bg-primary rounded-pill">${t.averageRating}</span></div>
                <span>${t.artistName}</span>
            </div>
            <button data-uid="${t.id}" type="button" class="btn btn-danger">Remove from Favorites</button>
        `,e.appendChild(a)}),p()}function p(){document.querySelectorAll("#my-albums .btn-danger").forEach(t=>{t.addEventListener("click",function(){const a=t.dataset.uid;b(a),d()})})}async function b(e){i=i.filter(t=>t.id!==e)}document.getElementById("search-button").addEventListener("click",u);document.getElementById("favorites-button").addEventListener("click",m);r();
